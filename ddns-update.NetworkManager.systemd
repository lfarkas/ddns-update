#!/bin/sh

export LC_ALL=C
PATH=/usr/sbin:/sbin:$PATH

if [ "$2" = "down" ]; then
	ip route ls | grep -q '^default' || {
		[ -f /var/run/ddns-update/ddns-update.pid ] && systemctl stop ddns-update.service || :
	} && { :; }
fi

if [ "$2" = "up" ]; then
	ip -o route show dev "$1" | grep -q '^default' && {
		systemctl start ddns-update.service || :
	} || { :; }
fi

ddns-update
